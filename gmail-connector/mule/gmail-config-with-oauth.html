
<!DOCTYPE html>


































































<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

  <meta name="description" content="Documentation for Mule Gmail Cloud Connector." />

<link rel="shortcut icon" type="image/x-icon" href="../favicon.ico" />
<title>

  GmailConnector


| Mule Gmail Cloud Connector

</title>
<link href="../assets/mule-developer-docs.css" rel="stylesheet" type="text/css" />
<link href="../assets/mule-developer-prettify.css" rel="stylesheet" type="text/css" />
<link href="../assets/customizations.css" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Ubuntu:300' rel='stylesheet' type='text/css'>
<script src="../assets/search_autocomplete.js" type="text/javascript"></script>
<script src="../assets/jquery-resizable.min.js" type="text/javascript"></script>
<script src="../assets/jquery-toc.js" type="text/javascript"></script>
<script src="../assets/mule-developer-docs.js" type="text/javascript"></script>
<script src="../assets/prettify.js" type="text/javascript"></script>
<script type="text/javascript">
  setToRoot("../", "../assets/");
</script>
<script src="../assets/customizations.js" type="text/javascript"></script>
<noscript>
  <style type="text/css">
    html,body{overflow:auto;}
    #body-content{position:relative; top:0;}
    #doc-content{overflow:visible;border-left:3px solid #666;}
    #side-nav{padding:0;}
    #side-nav .toggle-list ul {display:block;}
    #resize-packages-nav{border-bottom:3px solid #666;}
  </style>
</noscript>
<script type="text/javascript" charset="utf-8">
  var is_ssl = ("https:" == document.location.protocol);
  var asset_host = is_ssl ? "https://s3.amazonaws.com/getsatisfaction.com/" : "http://s3.amazonaws.com/getsatisfaction.com/";
  document.write(unescape("%3Cscript src='" + asset_host + "javascripts/feedback-v2.js' type='text/javascript'%3E%3C/script%3E"));
</script>

<script type="text/javascript" charset="utf-8">
  var feedback_widget_options = {};

  feedback_widget_options.display = "overlay";
  feedback_widget_options.company = "mulesoft";
  feedback_widget_options.placement = "right";
  feedback_widget_options.color = "#2F74AE";
  feedback_widget_options.style = "question";

  feedback_widget_options.tag = "Mule Gmail Cloud Connector";

  feedback_widget_options.limit = "3";

  var feedback_widget = new GSFN.feedback_widget(feedback_widget_options);
</script>
</head>

<body class="">

<div id="header">
    <div id="headerLeft">
    
      <span id="masthead-title">Mule Gmail Cloud Connector</span>
    
    <ul id="header-tabs" class="mule">
    
    	<li id="guide"><a href="../guide/install.html">
	    	<span class="en">Install Guide</span>
    	</a></li>
    
    	<li id="java"><a href="../java/packages.html">
	    	<span class="en">Java API Reference</span>
    	</a></li>
    
    	<li id="mule"><a href="../mule/modules.html">
	    	<span class="en">Mule API Reference</span>
    	</a></li>
    
    </ul>
    </div>
    <div id="headerRight">
      <a href="http://www.mulesoft.com" tabindex="-1">
      <img src="../assets//images/mulesoft-logo-final.gif" alt="MuleSoft" border="0" id="mulesoftlogo"></a><br/>
      
  <div id="search" >
      <div id="searchForm">
          <form accept-charset="utf-8" class="gsc-search-box" 
                onsubmit="return submit_search()">
            <table class="gsc-search-box" cellpadding="0" cellspacing="0"><tbody>
                <tr>
                  <td class="gsc-input">
                    <input id="search_autocomplete" class="gsc-input" type="text" size="33" autocomplete="off"
                      title="search developer docs" name="q"
                      value="search developer docs"
                      onFocus="search_focus_changed(this, true)"
                      onBlur="search_focus_changed(this, false)"
                      onkeydown="return search_changed(event, true, '../')"
                      onkeyup="return search_changed(event, false, '../')" />
                  <div id="search_filtered_div" class="no-display">
                      <table id="search_filtered" cellspacing=0>
                      </table>
                  </div>
                  </td>
                  <td class="gsc-search-button">
                    <input type="submit" value="Search" title="search" id="search-button" class="gsc-search-button" />
                  </td>
                  <td class="gsc-clear-button">
                    <div title="clear results" class="gsc-clear-button">&nbsp;</div>
                  </td>
                </tr></tbody>
              </table>
          </form>
      </div><!-- searchForm -->
  </div><!-- search -->
      
    </div>
</div><!-- header -->


<div class="g-unit" id="all-content">

<div id="api-info-block">

<div class="sum-details-links">

Summary:
<a href="#lconfig">Configuration</a>



</div><!-- end sum-details-links -->

<div class="api-level">
  


  
  

</div>
</div><!-- end api-info-block -->


<!-- ======== START OF MODULE DATA ======== -->

<div id="jd-header">
    org.mule.module
<h1>mule-module-gmail</h1>
    config-with-oauth

</div><!-- end header -->

<div id="naMessage"></div>

<div id="jd-content" class="api apilevel-">


<br/>

<div class="jd-tagdata">
      <table class="jd-tagtable">
        <tbody><tr>
          <th>Namespace</th><td>http://www.mulesoft.org/schema/mule/gmail</td>
        </tr><tr>
          <th>Schema Location</th><td>http://www.mulesoft.org/schema/mule/gmail/current/mule-gmail.xsd&nbsp;&nbsp;(<a href="gmail-schema.html">View Schema</a>)</td>
        </tr>
<tr>
          <th>Schema Version</th><td>1.0</td>
        </tr>
<tr>
          <th>Minimum Mule Version</th><td>3.3</td>
        </tr>
    </tbody></table>
  </div>

<div class="jd-descr">


<h2>Module Overview</h2>
<p>Gmail cloud connector.
 This connector covers the standard IMAP protocol plus Google's extensions for Gmail.
 This implementation uses OAuth2 for authentication</p>


</div><!-- jd-descr -->











<div class="jd-descr">


<h2>Summary</h2>

<!-- Config -->

<!-- =========== CONFIG SUMMARY =========== -->
<table id="lconfig" class="jd-sumtable"><tr><th colspan="12">Configuration</th></tr>
	 
    <tr class=" api apilevel-" >
        <td class="jd-linkcol" width="100%"><nobr>
        <span class="sympad"><a href="../mule/gmail-config-with-oauth.html#config-with-oauth">&lt;gmail:config-with-oauth&gt;</a></nobr>
        <div class="jd-descrdiv">Configure an instance of this module</div>
  </td></tr>
</table>



<table id="promethods" class="jd-sumtable">
<tr><th colspan="12">Message Processors<br/><span style="font-weight: 200;"></span></th></tr>
    
    
    <!-- ========== MESSAGE PROCESSOR SUMMARY =========== -->
    


	 
    <tr class="alt-color api apilevel-" >
        <td class="jd-linkcol" width="100%"><nobr>
        <span class="sympad"><a href="../mule/gmail-config-with-oauth.html#advanced-search">&lt;gmail:advanced-search&gt;</a></nobr>
        
        <div class="jd-descrdiv">Search and returns messages on a folder of the given username
 using a search criteria provided by the user via the searchTerm parameter.</div>
        
  </td></tr>


	 
    <tr class=" api apilevel-" >
        <td class="jd-linkcol" width="100%"><nobr>
        <span class="sympad"><a href="../mule/gmail-config-with-oauth.html#delete">&lt;gmail:delete&gt;</a></nobr>
        
        <div class="jd-descrdiv">Moves the given message to the trash and deletes it from its current folder 
 
 </div>
        
  </td></tr>


	 
    <tr class="alt-color api apilevel-" >
        <td class="jd-linkcol" width="100%"><nobr>
        <span class="sympad"><a href="../mule/gmail-config-with-oauth.html#search">&lt;gmail:search&gt;</a></nobr>
        
        <div class="jd-descrdiv">Returns messages in the user mailbox applying optional search criterias.</div>
        
  </td></tr>



    
    
    
</table>











</div><!-- jd-descr (summary) -->


<!-- ========= CONFIGURATION DETAIL ======== -->
<A NAME="config-with-oauth"></A>
<h2>Configuration</h2>
<p>To use the this module within a flow the namespace to the module must be included. The resulting flow will look
similar to the following:</p>
<pre>
&lt;mule xmlns="http://www.mulesoft.org/schema/mule/core"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
      xmlns:gmail="http://www.mulesoft.org/schema/mule/gmail"
      xsi:schemaLocation="
               http://www.mulesoft.org/schema/mule/core
               http://www.mulesoft.org/schema/mule/core/current/mule.xsd
               http://www.mulesoft.org/schema/mule/gmail
               http://www.mulesoft.org/schema/mule/gmail/current/mule-gmail.xsd"&gt;

      &lt;!-- here goes your flows and configuration elements --&gt;

&lt;/mule&gt;
</pre>

<p>This module is configured using the <i>config</i> element. This element must be placed outside of your flows and at
the root of your Mule application. You can create as many configurations as you deem necessary as long as each carries
its own name.</p>
<p>Each message processor, message source or transformer carries a <i>config-ref</i> attribute that allows the invoker to
specify which configuration to use.</p>
<table id="lconfig" class="jd-sumtable">
<tr><th colspan="12">Attributes</th></tr>
<tr><th>Type</th><th>Name</th><th>Default Value</th><th>Description</th><th>Java Type</th><th>MIME Type</th><th>Encoding</th></tr>
<td class="jd-typecol"><nobr>xs:string</nobr></td>
<td class="jd-linkcol"><nobr>name</nobr></td>
<td class="jd-descrcol"></td>
<td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Give a name to this configuration so it can be later referenced.</td>
<td/><td/><td/>

    
      <tr class=" api apilevel-" >
          <td class="jd-typecol"><nobr>
          xs:string</nobr></td>
          <td class="jd-linkcol"><nobr>applicationName</nobr></td>
          <td class="jd-descrcol">Mule-GmailConnector/1.0</td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Application name registered on Google API console
</td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
      </tr>
      
    
      <tr class="alt-color api apilevel-" >
          <td class="jd-typecol"><nobr>
          xs:string</nobr></td>
          <td class="jd-linkcol"><nobr>consumerKey</nobr></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol" width="100%">The OAuth2 consumer key 
</td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
      </tr>
      
    
      <tr class=" api apilevel-" >
          <td class="jd-typecol"><nobr>
          xs:string</nobr></td>
          <td class="jd-linkcol"><nobr>consumerSecret</nobr></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol" width="100%">The OAuth2 consumer secret 
</td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
      </tr>
      
    
      <tr class="alt-color api apilevel-" >
          <td class="jd-typecol"><nobr>
          </nobr></td>
          <td class="jd-linkcol"><nobr>identifierPolicy</nobr></td>
          <td class="jd-descrcol">EMAIL</td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>This policy represents which id we want to use to represent each google account.</td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
      </tr>
      
    
      <tr class=" api apilevel-" >
          <td class="jd-typecol"><nobr>
          xs:string</nobr></td>
          <td class="jd-linkcol"><nobr>scope</nobr></td>
          <td class="jd-descrcol">https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email https://mail.google.com/</td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>The OAuth scopes you want to request
</td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
      </tr>
      
    
    
    
      <tr class="alt-color api apilevel-" >
          <td class="jd-typecol"><nobr>xs:string</nobr></td>
          <td class="jd-linkcol"><nobr>authorizationUrl</nobr></td>
          <td class="jd-descrcol">https://accounts.google.com/o/oauth2/auth</td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>The URL defined by the Service Provider where the resource owner will be redirected to grant authorization to the connector</td>
      </tr>
      
      <tr class=" api apilevel-" >
          <td class="jd-typecol"><nobr>xs:string</nobr></td>
          <td class="jd-linkcol"><nobr>accessTokenUrl</nobr></td>
          <td class="jd-descrcol">https://accounts.google.com/o/oauth2/token</td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>The URL defined by the Service Provider to obtain an access token</td>
      </tr>
      
    
</table>










<!-- ========= OAUTH DETAIL ======== -->
<h2>OAuth</h2>
<p>This connector uses OAuth as an authorization and authentication mechanism with automatic saving and restoring
of access tokens. Every message processor in this connector has an extra attribute entitled <i>accessTokenId</i> which is
an identification of the user authorizing the conenctor. In order to obtain an access token identification you need to
first call the authroize message processor.</p>
<p>Authorizing the connector is a simple process of calling:</p>
<pre>
    &lt;gmail:authorize/&gt;
</pre>
<p>The call to authorize message processor must be made from a message coming from an HTTP inbound endpoint as the authorize process will
reply with a redirect to the service provider. The following is an example of how to use it in a flow with an HTTP inbound endpoint:</p>
<pre>
    &lt;flow name="authorizationAndAuthenticationFlow"&gt;
        &lt;http:inbound-endpoint host="localhost" port="8080" path="oauth-authorize"/&gt;
        &lt;gmail:authorize/&gt;
    &lt;/flow&gt;
</pre>
<p>If you hit that endpoint via a web-browser it will initiate the OAuth dance, redirecting the user to the service provider page
and creating a callback endpoint so the service provider can redirect back once the user has been authenticated and properly
authorized the connector. Once the callback gets called then the connector will automatically issue an access token identifier
that you need to save as either a cookie or a database record for any subsequent calls.</p>
<p>The authorize message processor also supports the following attributes:</p>
<table id="lconfig" class="jd-sumtable">
<tr><th colspan="12">Authorize Attributes</th></tr>
<tr><th>Name</th><th>Default Value</th><th>Description</th></tr>

    
      <tr class=" api apilevel-" >
          <td class="jd-linkcol"><nobr>access_type</nobr></td>
          <td class="jd-descrcol"><nobr>online</nobr></td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Indicates if your application needs to access a Google API when the user is not present at the browser.  Use offline to get a refresh token and use that when the user is not at the browser. Default is online</td>
      </tr>
      
    
      <tr class="alt-color api apilevel-" >
          <td class="jd-linkcol"><nobr>force_prompt</nobr></td>
          <td class="jd-descrcol"><nobr>auto</nobr></td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Indicates if google should remember that an app has been authorized or if each should ask authorization every time.  Use force to request authorization every time or auto to only do it the first time. Default is auto</td>
      </tr>
      
    

    
    
      <tr class=" api apilevel-" >
          <td class="jd-linkcol"><nobr>authorizationUrl</nobr></td>
          <td class="jd-descrcol">https://accounts.google.com/o/oauth2/auth</td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>The URL defined by the Service Provider where the resource owner will be redirected to grant authorization to the connector</td>
      </tr>
      
      <tr class="alt-color api apilevel-" >
          <td class="jd-linkcol"><nobr>accessTokenUrl</nobr></td>
          <td class="jd-descrcol">https://accounts.google.com/o/oauth2/token</td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>The URL defined by the Service Provider to obtain an access token</td>
      </tr>
      
    

</table>
<h3>After Authorization</h3>
<p>The <i>authorize</i> message processor is an intercepting one. If the connector is not authorized yet, it will redirect
to the service provider so the user can authorize the connector. This is the reason as to why the authorize needs to be behind
and <i>http:inbound-endpoint</i>. The service provider upon successful authentication and authorization then will call back the
connector. The connector will extract information from that call, set its internal state to authorized, and then continue
execution. Continuing execution means executing everything that was after the authorize whose execution got
interrupted because the connector was not authorized.</p>
<pre>
  &lt;flow name="authorizationAndAuthenticationFlow"&gt;
      &lt;http:inbound-endpoint host="localhost" port="8080" path="oauth-authorize"/&gt;
      &lt;gmail:authorize/&gt;
      &lt;http:response-builder status="200"&gt;
          &lt;set-payload value="You have successfully authorized the connector"/&gt;
      &lt;/http:response-builder&gt;
  &lt;/flow&gt;
</pre>
<p>In the previous example we added the <i>http:response-build</i> (notice that this element is available only in Mule 3.3.0 and later). If
the connector is not authorized, the execution of the response builder will be delayed up to the point of the callback execution.</p>
<p>On the other hand if the connector has been authorized and you call <i>authorize</i> again then the flow execution will not stop, it will
rather continue and the <i>http:response-builder</i> will get executed right away rather than after the callback.</p>
<p>The following is an example of the authorize message processor, after which it will print the access token identifier to the
log:</p>
<pre>
    &lt;flow name="authorizationAndAuthenticationFlow"&gt;
        &lt;http:inbound-endpoint host="localhost" port="8080" path="oauth-authorize"/&gt;
        &lt;gmail:authorize/&gt;
		&lt;log level="INFO" message="The connector has been properly authorized. The access token identifier is #[flowVars['OAuthAccessTokenId']]"/&gt;
    &lt;/flow&gt;
</pre>
<p>The <i>OAuthAccessTokenId</i> flow variable is a special variable available to all the message processors executing after the authorize call. The following
snippet shows how you can save it as a HTTP protocol cookie:</p>
<pre>
    &lt;flow name="authorizationAndAuthenticationFlow"&gt;
        &lt;http:inbound-endpoint host="localhost" port="8080" path="oauth-authorize"/&gt;
        &lt;gmail:authorize/&gt;
        &lt;http:response-builder status="200"&gt;
            &lt;http:set-cookie name="accessTokenId" value="#[flowVars['OAuthAccessTokenId']]"/&gt;
            &lt;set-payload value="You have successfully authorized the connector. You access token id is #[flowVars['OAuthAccessTokenId']]"/&gt;
        &lt;/http:response-builder&gt;
    &lt;/flow&gt;
</pre>
<p>The access token identifier is unique per user and therefore the connector can be authorized for many users. If the user authorizes
the connector twice it will have the same access token identifier both times.</p>
<h3>Error Handling during Authorization</h3>
<p>If for any reason, an errors ocurrs while processing the callback, the exception strategy of the flow containing the authorize will be
executed. So, if the callback sent the wrong information you can handle that situation by setting up an exception strategy as follows:</p>
<pre>
  &lt;flow name="authorizationAndAuthenticationFlow"&gt;
      &lt;http:inbound-endpoint host="localhost" port="8080" path="oauth-authorize"/&gt;
      &lt;gmail:authorize/&gt;
      &lt;http:response-builder status="200"&gt;
          &lt;set-payload value="You have successfully authorized the connector"/&gt;
      &lt;/http:response-builder&gt;
      &lt;catch-exception-strategy&gt;
         &lt;http:response-builder status="404"&gt;
             &lt;set-payload value="An error has occurred authorizing the connector"/&gt;
         &lt;/http:response-builder&gt;
      &lt;/catch-exception-strategy&gt;
  &lt;/flow&gt;
</pre>
<h3>Unauthorize</h3>
<p>Once this connector has been authorized further calls to the <i>authorize</i> message processor will be no-ops. If you wish to reset
the state of the connector back to a non-authorized state you can call:</p>
<pre>
    &lt;gmail:unauthorize/&gt;
</pre>
<p>Keep in mind that after the connector is unauthorized all future calls that attempt to access protected resources will fail until
 the connector is re-authorized.</p>
<h3>Callback Customization</h3>
<p>As mentioned earlier once authorize gets called and before we redirect the user to the service provider we create a callback
endpoint. The callback endpoint will get called automatically by the service provider once the user is authenticated and he
grants authorization to the connector to access his private information.</p>
<p>The callback can be customized in the config element of the this connector as follows:</p>
<pre>
    &lt;gmail:config&gt;
        &lt;gmail:oauth-callback-config domain="${fullDomain}" localPort="${http.port}" remotePort="80"/&gt;
    &lt;/gmail:config&gt;
</pre>
<p>The <i>oauth-callback-config</i> element can be used to customize the endpoint that gets created for the callback. It
features the following attributes:</p>
<table id="lconfig" class="jd-sumtable">
<tr><th colspan="12">OAuth Callback Config Attributes</th></tr>
<tr><th>Name</th><th>Description</th></tr>
<tr class="api" >
<td class="jd-linkcol"><nobr>connector-ref</nobr></td>
<td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Reference to a user-defined HTTP connector.</td>
</tr>
<tr class="api" >
<td class="jd-linkcol"><nobr>domain</nobr></td>
<td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>The domain portion of the callback URL. This is usually something like xxx.cloudhub.io if you are deploying to CloudHub for example.</td>
</tr>
<tr class="api" >
<td class="jd-linkcol"><nobr>localPort</nobr></td>
<td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>The local port number that the endpoint will listen on. Normally 80, in the case of CloudHub you can use the environment variable ${http.port}.</td>
</tr>
<tr class="api" >
<td class="jd-linkcol"><nobr>remotePort</nobr></td>
<td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>This is the port number that we will tell the service provider we are listening on. It is usually the same as localPort but it is separated in case your deployment features port forwarding or a proxy.</td>
</tr>
<tr class="api" >
<td class="jd-linkcol"><nobr>path</nobr></td>
<td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Path under which the callback should be exposed. If not specified a random path will be generated.</td>
</tr>
</table>
<p class="caution">The example shown above is what the configuration would look like if your app would be deployed to CloudHub.</p>
<h3>Access Token Store</h3>
<p>This connector has the capability of automatically saving and restoring access tokens. The connector will store in either the default user object store
or a user-defined one the acquired access tokens, refresh tokens, and any other pertinent information using the access token identifier as the key.</p>
<p>The object store can be configured as follows</p>
<pre>
    &lt;gmail:config&gt;
        &lt;gmail:oauth-store-config objectStore-ref="my-object-store"/&gt;
    &lt;/gmail:config&gt;
</pre>
<p>There is only a single attribute entitled <i>objectStore-ref</i> in the <i>oauth-store-config</i> element that allows the user to specify the name
of the object store that he wishes to use to save and restore access tokens.</p>





<!-- ========= MESSAGE PROCESSOR DETAIL ======== -->
<!-- Message Processors -->
<h2>Message Processors</h2>


    
    


<A NAME="advanced-search"></A>

<div class="jd-details api apilevel-">
    <h4 class="jd-details-title">
      <span class="sympad">&lt;gmail:advanced-search&gt;</span>
    </h4>
      <div class="api-level">
        <div>

</div>
      </div>
    <div class="jd-details-descr">
      
  <div class="jd-tagdata jd-tagdescr"><p>Search and returns messages on a folder of the given username
 using a search criteria provided by the user via the searchTerm parameter.
 
 Returns messages in the user mailbox applying optional search criterias.
 The messages are returned in the form of  <code><a href="../java/org/mule/module/gmail/model/MailMessage.html">MailMessage</a></code> instances
 which allows the connector's user to be decoupled from the IMAP protocol internals but also allows for the
 mailbox connection to be closed automatically.
 
 <div class="jd-tagdata"><h5 class="jd-tagtitle">XML Sample</h5><pre>&lt;gmail:advanced-search username="me@mulesoft.com" folder="INBOX" searchTerm-ref="#[flowVars['searchTerm']]" config-ref="gmail"/&gt;</pre></div></p></div>
  <div class="jd-tagdata">
      <h5 class="jd-tagtitle">Attributes</h5>

        <table id="lconfig" class="jd-sumtable">
        <tr><th>Name</th><th>Default Value</th><th>Description</th><th>Java Type</th><th>MIME Type</th><th>Encoding</th></tr>
        <tr>
          <td class="jd-linkcol"><nobr>config-ref</nobr></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Specify which configuration to use.</td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
        </tr>
          
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>username</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol">The account's username</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>password</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>Only needed is you're using basic authentication. If you're using OAuth2 then this parameter is not used</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>folder</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol">The folder in which to search. If you want all of them then use ALL_MAIL</td>
                        <td class="jd-descrcol"><a href="../java/org/mule/module/gmail/search/GmailFolder.html">GmailFolder</a></td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol"></td>
                    </tr>
                
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>searchTerm</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol">An instance of <code><a href="../java/com/google/code/javax/mail/search/SearchTerm.html">SearchTerm</a></code>. If not provided, then no filtering criteria is applied</td>
                        <td class="jd-descrcol"><a href="../java/com/google/code/javax/mail/search/SearchTerm.html">SearchTerm</a></td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol"></td>
                    </tr>
                
                
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>expunge</nobr></td>
                        <td class="jd-descrcol">false</td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>Expunges all deleted messages if this flag is true</td>
                        <td class="jd-descrcol">Boolean</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol"></td>
                    </tr>
                
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>includeAttachments</nobr></td>
                        <td class="jd-descrcol">false</td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>Wether or not to also download the message's attachments. Default value is false bandwidth wise.</td>
                        <td class="jd-descrcol">Boolean</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol"></td>
                    </tr>
                
                
          
          
          
              <tr><th colspan="12">OAuth Parameters<br/><span style="font-weight: 200;">The following values are always required when using OAuth as the authentication mechanism.</span></th></tr>
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>accessTokenId</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol" width="100%">Access token identifier used to retrieve an access token from the store</td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"></td>
                    </tr>
          
        </table>
  </div>
  
  
      <div class="jd-tagdata">
         <h5 class="jd-tagtitle">Returns</h5>
         <table id="lconfig" class="jd-sumtable">
             <tr>
                <th>Return Type</th>
                <th>Description</th>
             </tr>
             <tr>
                <td class="jd-descrcol">List&lt;<a href="../java/org/mule/module/gmail/model/MailMessage.html">MailMessage</a>&gt;</td>
                <td class="jd-descrcol">a list of <code><a href="../java/org/mule/module/gmail/model/MailMessage.html">MailMessage</a></code> representing the found messages</td>
             </tr>
         </table>
  </div>
    
  
  <div class="jd-tagdata">
      <h5 class="jd-tagtitle">Exception Payloads</h5>
      <table class="jd-sumtable">
        <tr><th>Payload Class</th><th>Description</th></tr>
        
        <tr>
            <td><a href="../java/com/google/code/javax/mail/MessagingException.html">MessagingException</a></td>
            <td>if an error is found accessing the mailbox
</td>
        </tr>
      </table>
  </div>

    </div>
</div>


<A NAME="delete"></A>

<div class="jd-details api apilevel-">
    <h4 class="jd-details-title">
      <span class="sympad">&lt;gmail:delete&gt;</span>
    </h4>
      <div class="api-level">
        <div>

</div>
      </div>
    <div class="jd-details-descr">
      
  <div class="jd-tagdata jd-tagdescr"><p>Moves the given message to the trash and deletes it from its current folder 
 
 <div class="jd-tagdata"><h5 class="jd-tagtitle">XML Sample</h5><pre>&lt;gmail:delete username="me@mulesoft.com" config-ref="gmail" /&gt;</pre></div></p></div>
  <div class="jd-tagdata">
      <h5 class="jd-tagtitle">Attributes</h5>

        <table id="lconfig" class="jd-sumtable">
        <tr><th>Name</th><th>Default Value</th><th>Description</th><th>Java Type</th><th>MIME Type</th><th>Encoding</th></tr>
        <tr>
          <td class="jd-linkcol"><nobr>config-ref</nobr></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Specify which configuration to use.</td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
        </tr>
          
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>mailMessage</nobr></td>
                        <td class="jd-descrcol">#[payload]</td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>An instance of <code><a href="../java/org/mule/module/gmail/model/MailMessage.html">MailMessage</a></code> representing the message to be deleted. At the very
 					least, the googleId property must be not null</td>
                        <td class="jd-descrcol"><a href="../java/org/mule/module/gmail/model/MailMessage.html">MailMessage</a></td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol"></td>
                    </tr>
                
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>username</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol">The mailbox username</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>password</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>Optional value only required when using basic auth. Ignore this if you're using OAuth</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
          
          
              <tr><th colspan="12">OAuth Parameters<br/><span style="font-weight: 200;">The following values are always required when using OAuth as the authentication mechanism.</span></th></tr>
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>accessTokenId</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol" width="100%">Access token identifier used to retrieve an access token from the store</td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"></td>
                    </tr>
          
        </table>
  </div>
  
  
    
  
  <div class="jd-tagdata">
      <h5 class="jd-tagtitle">Exception Payloads</h5>
      <table class="jd-sumtable">
        <tr><th>Payload Class</th><th>Description</th></tr>
        
        <tr>
            <td><a href="../java/com/google/code/javax/mail/MessagingException.html">MessagingException</a></td>
            <td>if the mailbox throws an exception</td>
        </tr>
        <tr>
            <td>IllegalArgumentException</td>
            <td>if the mailbox contains no email with that id
</td>
        </tr>
      </table>
  </div>

    </div>
</div>


<A NAME="search"></A>

<div class="jd-details api apilevel-">
    <h4 class="jd-details-title">
      <span class="sympad">&lt;gmail:search&gt;</span>
    </h4>
      <div class="api-level">
        <div>

</div>
      </div>
    <div class="jd-details-descr">
      
  <div class="jd-tagdata jd-tagdescr"><p>Returns messages in the user mailbox applying optional search criterias.
 The messages are returned in the form of  <code><a href="../java/org/mule/module/gmail/model/MailMessage.html">MailMessage</a></code> instances
 which allows the connector's user to be decoupled from the IMAP protocol internals but also allows for the
 mailbox connection to be closed automatically.
 
 <div class="jd-tagdata"><h5 class="jd-tagtitle">XML Sample</h5><pre>&lt;gmail:search username="me@mulesoft.com" folder="INBOX" config-ref="gmail" /&gt;</pre></div></p></div>
  <div class="jd-tagdata">
      <h5 class="jd-tagtitle">Attributes</h5>

        <table id="lconfig" class="jd-sumtable">
        <tr><th>Name</th><th>Default Value</th><th>Description</th><th>Java Type</th><th>MIME Type</th><th>Encoding</th></tr>
        <tr>
          <td class="jd-linkcol"><nobr>config-ref</nobr></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol" width="100%"><i>Optional.&nbsp;</i>Specify which configuration to use.</td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
          <td class="jd-descrcol"></td>
        </tr>
          
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>username</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol">The account's username</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>folder</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol">The folder in which to search. If you want all of them then use ALL_MAIL</td>
                        <td class="jd-descrcol"><a href="../java/org/mule/module/gmail/search/GmailFolder.html">GmailFolder</a></td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol"></td>
                    </tr>
                
                
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>password</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>Only needed is you're using basic authentication. If you're using OAuth2 then this parameter is not used</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>receivedBefore</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>A date in the specified string format giving a lower bound filter to the received date. If no dateFormat is specified, then RFC3339 is assumed</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>receivedAfter</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>A date in the specified string format giving an upper bound filter to the received date. If no dateFormat is specified, then RFC3339 is assumed</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>sentBefore</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>A date in the specified string format giving a lower bound filter to the sent date. If no dateFormat is specified, then RFC3339 is assumed</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>sentAfter</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>A date in the specified string format giving an upper bound filter to the sent date. If no dateFormat is specified, then RFC3339 is assumed</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
          
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>messageNumber</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>Used to look for the message with the specified number</td>
                        <td class="jd-descrcol">Integer</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol"></td>
                    </tr>
                
                
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>size</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>An instance of <code><a href="../java/org/mule/module/gmail/search/SearchCriteria.html">SearchCriteria</a></code> to specify restrictions on the message's size</td>
                        <td class="jd-descrcol"><a href="../java/org/mule/module/gmail/search/SearchCriteria.html">SearchCriteria</a></td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol"></td>
                    </tr>
                
                
          
                
          
                
          
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>threadId</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>The id of the thread for which the message should belong </td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
          
                
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>messageId</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>Used to fetch one given message by id</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>dateFormat</nobr></td>
                        <td class="jd-descrcol">yyyy-MM-dd\'T\'HH:mm:ss\'Z\'</td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>The format to be used to parse the date attributes. If no dateFormat is specified, then RFC3339 is assumed</td>
                        <td class="jd-descrcol">String</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol">UTF-8</td>
                    </tr>
                
                
          
                
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>expunge</nobr></td>
                        <td class="jd-descrcol">false</td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>Expunges all deleted messages if this flag is true</td>
                        <td class="jd-descrcol">Boolean</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol"></td>
                    </tr>
                
                
          
                
                    <tr class="alt-color api apilevel-" >
                        <td class="jd-linkcol"><nobr>includeAttachments</nobr></td>
                        <td class="jd-descrcol">false</td>
                        <td class="jd-descrcol"><i>Optional.&nbsp;</i>Wether or not to also download the message's attachments. Default value is false bandwidth wise.</td>
                        <td class="jd-descrcol">Boolean</td>
                        <td class="jd-descrcol">*/*</td>
                        <td class="jd-descrcol"></td>
                    </tr>
                
                
          
          
          
              <tr><th colspan="12">OAuth Parameters<br/><span style="font-weight: 200;">The following values are always required when using OAuth as the authentication mechanism.</span></th></tr>
                    <tr class=" api apilevel-" >
                        <td class="jd-linkcol"><nobr>accessTokenId</nobr></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol" width="100%">Access token identifier used to retrieve an access token from the store</td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"></td>
                        <td class="jd-descrcol"></td>
                    </tr>
          
        </table>
  </div>
  
      <div class="jd-tagdata">
          <h5 class="jd-tagtitle">Child Elements</h5>
            <table id="lconfig" class="jd-sumtable">
              
              <tr><th>Name</th><th>Default Value</th><th>Description</th><th>Java Type</th></td>
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
                    <tr>
                        <td><nobr>&lt;gmail:from-addresses&gt;</nobr></td>
                        <td></td>
                        <td><i>Optional.&nbsp;</i>A list of addresses to be found in the from attribute. This is an OR operation logic. All messages with any one of these addresses will be returned </td>
                        <td>List&lt;String&gt;</td>
                    </tr>
                
                
              
                
                    <tr>
                        <td><nobr>&lt;gmail:to-addresses&gt;</nobr></td>
                        <td></td>
                        <td><i>Optional.&nbsp;</i>A list of addresses to be found in the to attribute. This is an OR operation logic. All messages with any one of these addresses will be returned</td>
                        <td>List&lt;String&gt;</td>
                    </tr>
                
                
              
                
              
                
              
                
                    <tr>
                        <td><nobr>&lt;gmail:flags&gt;</nobr></td>
                        <td></td>
                        <td><i>Optional.&nbsp;</i>A list of <code><a href="../java/org/mule/module/gmail/search/FlagCriteria.html">FlagCriteria</a></code> to specify flag values that the messages should have</td>
                        <td>List&lt;<a href="../java/org/mule/module/gmail/search/FlagCriteria.html">FlagCriteria</a>&gt;</td>
                    </tr>
                
                
              
                
                    <tr>
                        <td><nobr>&lt;gmail:labels&gt;</nobr></td>
                        <td></td>
                        <td><i>Optional.&nbsp;</i>A list of Strings which represent the labels that the messages need to have. This is an OR operation logic. All messages with any one of these labels will be returned</td>
                        <td>List&lt;String&gt;</td>
                    </tr>
                
                
              
                
                    <tr>
                        <td><nobr>&lt;gmail:raw-search-terms&gt;</nobr></td>
                        <td></td>
                        <td><i>Optional.&nbsp;</i>A list of Strings which represent terms that the message should have. This is an OR operation logic. All messages with any one of these terms will be returned</td>
                        <td>List&lt;String&gt;</td>
                    </tr>
                
                
              
                
              
                
                    <tr>
                        <td><nobr>&lt;gmail:body-terms&gt;</nobr></td>
                        <td></td>
                        <td><i>Optional.&nbsp;</i>A list of Strings which represent the body terms that the messages need to have. This is an OR operation logic. All messages with any one of these terms will be returned</td>
                        <td>List&lt;String&gt;</td>
                    </tr>
                
                
              
                
                    <tr>
                        <td><nobr>&lt;gmail:header-terms&gt;</nobr></td>
                        <td></td>
                        <td><i>Optional.&nbsp;</i>A list of Strings which represent the header terms that the messages need to have. This is an OR operation logic. All messages with any one of these terms will be returned</td>
                        <td>List&lt;String&gt;</td>
                    </tr>
                
                
              
                
              
                
                    <tr>
                        <td><nobr>&lt;gmail:subject-terms&gt;</nobr></td>
                        <td></td>
                        <td><i>Optional.&nbsp;</i>A list of Strings which represent the subject terms that the messages need to have. This is an OR operation logic. All messages with any one of these terms will be returned</td>
                        <td>List&lt;String&gt;</td>
                    </tr>
                
                
              
                
              
                
              
                
              
          </table>
      </div>
  
  
      <div class="jd-tagdata">
         <h5 class="jd-tagtitle">Returns</h5>
         <table id="lconfig" class="jd-sumtable">
             <tr>
                <th>Return Type</th>
                <th>Description</th>
             </tr>
             <tr>
                <td class="jd-descrcol">List&lt;<a href="../java/org/mule/module/gmail/model/MailMessage.html">MailMessage</a>&gt;</td>
                <td class="jd-descrcol">a list of <code><a href="../java/org/mule/module/gmail/model/MailMessage.html">MailMessage</a></code></td>
             </tr>
         </table>
  </div>
    
  
  <div class="jd-tagdata">
      <h5 class="jd-tagtitle">Exception Payloads</h5>
      <table class="jd-sumtable">
        <tr><th>Payload Class</th><th>Description</th></tr>
        
        <tr>
            <td><a href="../java/com/google/code/javax/mail/MessagingException.html">MessagingException</a></td>
            <td>if an error is found accessing the mailbox
</td>
        </tr>
      </table>
  </div>

    </div>
</div>


    





<!-- ========= MESSAGE SOURCES DETAIL ======== -->
<!-- Message Sources -->
<h2>Message Sources</h2>


    





<!-- ========= MESSAGE SOURCES DETAIL ======== -->
<!-- Transformers -->
<h2>Transformers</h2>


    





<!-- ========= END OF CLASS DATA ========= -->
<A NAME="navbar_top"></A>

<div id="footer">
Generated by <a href="http://www.mulesoft.com/devkit">Mule DevKit</a>. Document generation technology based on <a href="http://code.google.com/p/doclava/">Google's Doclava</a>.
</div> <!-- end footer -->

</div> <!-- jd-content -->

</div><!-- end doc-content -->

</div> <!-- end body-content --> 

<script type="text/javascript">
init(); /* initialize mule-developer-docs.js */
</script>

</body>
</html>
